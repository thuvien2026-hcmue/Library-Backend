{"version":3,"file":"index.js","names":["callback: PasteCallback","props: FileRouter extends TRouter\n    ? ErrorMessage<\"You forgot to pass the generic\">\n    : UploadButtonProps<TRouter, TEndpoint>","files: File[]","files","e: React.MouseEvent","e: React.ChangeEvent<HTMLInputElement>","props: FileRouter extends TRouter\n    ? ErrorMessage<\"You forgot to pass the generic\">\n    : UploadDropzoneProps<TRouter, TEndpoint>","files: File[]","files","e: React.MouseEvent","acceptedFiles: File[]","event: ClipboardEvent","event: DropEvent","e: Pick<Event, \"preventDefault\">","event: DragEvent<HTMLElement>","event: ChangeEvent<HTMLElement>","event: KeyboardEvent","e: MouseEvent","props: FileRouter extends TRouter\n    ? ErrorMessage<\"You forgot to pass the generic\">\n    : UploadthingComponentProps<TRouter, TEndpoint>","opts?: GenerateTypedHelpersOptions","uploadthingClientVersion","props: Omit<\n      UploadButtonProps<TRouter, TEndpoint>,\n      keyof GenerateTypedHelpersOptions\n    >","props: Omit<\n      UploadDropzoneProps<TRouter, TEndpoint>,\n      keyof GenerateTypedHelpersOptions\n    >","props: Omit<\n      UploadthingComponentProps<TRouter, TEndpoint>,\n      keyof GenerateTypedHelpersOptions\n    >"],"sources":["../src/utils/usePaste.ts","../src/components/shared.tsx","../src/components/button.tsx","../src/components/dropzone.tsx","../src/components/uploader.tsx","../src/components/index.tsx"],"sourcesContent":["import { useEffect } from \"react\";\n\nimport { useEvent } from \"./useEvent\";\n\ntype PasteCallback = (event: ClipboardEvent) => void;\nexport const usePaste = (callback: PasteCallback) => {\n  const stableCallback = useEvent(callback);\n\n  useEffect(() => {\n    const controller = new AbortController();\n    window.addEventListener(\"paste\", stableCallback, {\n      signal: controller.signal,\n    });\n    return () => {\n      controller.abort();\n    };\n  }, [stableCallback]);\n};\n","import type { ClassListMerger } from \"@uploadthing/shared\";\n\nexport function Spinner() {\n  return (\n    <svg\n      className=\"z-10 block h-5 w-5 animate-spin align-middle text-white\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      viewBox=\"0 0 576 512\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M256 32C256 14.33 270.3 0 288 0C429.4 0 544 114.6 544 256C544 302.6 531.5 346.4 509.7 384C500.9 399.3 481.3 404.6 465.1 395.7C450.7 386.9 445.5 367.3 454.3 351.1C470.6 323.8 480 291 480 255.1C480 149.1 394 63.1 288 63.1C270.3 63.1 256 49.67 256 31.1V32z\"\n      />\n    </svg>\n  );\n}\n\nexport function Cancel({\n  className,\n  cn,\n  ...props\n}: React.SVGProps<SVGSVGElement> & { cn: ClassListMerger }) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className={cn(\"fill-none stroke-current stroke-2\", className)}\n      {...props}\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"m4.9 4.9 14.2 14.2\" />\n    </svg>\n  );\n}\n","\"use client\";\n\nimport type { CSSProperties } from \"react\";\nimport { useCallback, useMemo, useRef, useState } from \"react\";\n\nimport {\n  allowedContentTextLabelGenerator,\n  contentFieldToContent,\n  defaultClassListMerger,\n  generateMimeTypes,\n  generatePermittedFileTypes,\n  getFilesFromClipboardEvent,\n  resolveMaybeUrlArg,\n  styleFieldToClassName,\n  styleFieldToCssObject,\n  UploadAbortedError,\n} from \"@uploadthing/shared\";\nimport type {\n  ContentField,\n  ErrorMessage,\n  StyleField,\n} from \"@uploadthing/shared\";\nimport type { FileRouter } from \"uploadthing/types\";\n\nimport type { UploadthingComponentProps } from \"../types\";\nimport { __useUploadThingInternal } from \"../use-uploadthing\";\nimport { usePaste } from \"../utils/usePaste\";\nimport { Cancel, Spinner } from \"./shared\";\n\ntype ButtonStyleFieldCallbackArgs = {\n  __runtime: \"react\";\n  ready: boolean;\n  isUploading: boolean;\n  uploadProgress: number;\n  fileTypes: string[];\n  files: File[];\n};\n\ntype ButtonAppearance = {\n  container?: StyleField<ButtonStyleFieldCallbackArgs>;\n  button?: StyleField<ButtonStyleFieldCallbackArgs>;\n  allowedContent?: StyleField<ButtonStyleFieldCallbackArgs>;\n  clearBtn?: StyleField<ButtonStyleFieldCallbackArgs>;\n};\n\ntype ButtonContent = {\n  button?: ContentField<ButtonStyleFieldCallbackArgs>;\n  allowedContent?: ContentField<ButtonStyleFieldCallbackArgs>;\n  clearBtn?: ContentField<ButtonStyleFieldCallbackArgs>;\n};\n\nexport type UploadButtonProps<\n  TRouter extends FileRouter,\n  TEndpoint extends keyof TRouter,\n> = UploadthingComponentProps<TRouter, TEndpoint> & {\n  /**\n   * @see https://docs.uploadthing.com/theming#style-using-the-classname-prop\n   */\n  className?: string;\n  /**\n   * @see https://docs.uploadthing.com/theming#style-using-the-appearance-prop\n   */\n  appearance?: ButtonAppearance;\n  /**\n   * @see https://docs.uploadthing.com/theming#content-customisation\n   */\n  content?: ButtonContent;\n};\n\n/** These are some internal stuff we use to test the component and for forcing a state in docs */\ntype UploadThingInternalProps = {\n  __internal_state?: \"readying\" | \"ready\" | \"uploading\";\n  __internal_upload_progress?: number;\n  __internal_button_disabled?: boolean;\n};\n\n/**\n * @remarks It is not recommended using this directly as it requires manually binding generics. Instead, use `createUploadButton`.\n * @example\n * <UploadButton<OurFileRouter, \"someEndpoint\">\n *   endpoint=\"someEndpoint\"\n *   onUploadComplete={(res) => console.log(res)}\n *   onUploadError={(err) => console.log(err)}\n * />\n */\nexport function UploadButton<\n  TRouter extends FileRouter,\n  TEndpoint extends keyof TRouter,\n>(\n  props: FileRouter extends TRouter\n    ? ErrorMessage<\"You forgot to pass the generic\">\n    : UploadButtonProps<TRouter, TEndpoint>,\n) {\n  // Cast back to UploadthingComponentProps<TRouter> to get the correct type\n  // since the ErrorMessage messes it up otherwise\n  const $props = props as unknown as UploadButtonProps<TRouter, TEndpoint> &\n    UploadThingInternalProps;\n\n  const {\n    mode = \"auto\",\n    appendOnPaste = false,\n    cn = defaultClassListMerger,\n  } = $props.config ?? {};\n  const acRef = useRef(new AbortController());\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [uploadProgress, setUploadProgress] = useState(\n    $props.__internal_upload_progress ?? 0,\n  );\n  const [files, setFiles] = useState<File[]>([]);\n\n  const { startUpload, isUploading, routeConfig } = __useUploadThingInternal(\n    resolveMaybeUrlArg($props.url),\n    $props.endpoint,\n    $props.fetch ?? globalThis.fetch,\n    {\n      signal: acRef.current.signal,\n      headers: $props.headers,\n      onClientUploadComplete: (res) => {\n        if (fileInputRef.current) {\n          fileInputRef.current.value = \"\";\n        }\n        setFiles([]);\n        void $props.onClientUploadComplete?.(res);\n        setUploadProgress(0);\n      },\n      uploadProgressGranularity: $props.uploadProgressGranularity,\n      onUploadProgress: (p) => {\n        setUploadProgress(p);\n        $props.onUploadProgress?.(p);\n      },\n      onUploadError: $props.onUploadError,\n      onUploadBegin: $props.onUploadBegin,\n      onBeforeUploadBegin: $props.onBeforeUploadBegin,\n    },\n  );\n  const { fileTypes, multiple } = generatePermittedFileTypes(routeConfig);\n\n  const disabled = !!($props.__internal_button_disabled ?? $props.disabled);\n  const state = (() => {\n    const ready = $props.__internal_state === \"ready\" || fileTypes.length > 0;\n\n    if ($props.__internal_state) return $props.__internal_state;\n    if (disabled) return \"disabled\";\n    if (!ready) return \"readying\";\n    if (!isUploading) return \"ready\";\n    return \"uploading\";\n  })();\n\n  const uploadFiles = useCallback(\n    (files: File[]) => {\n      const input = \"input\" in $props ? $props.input : undefined;\n      startUpload(files, input).catch((e) => {\n        if (e instanceof UploadAbortedError) {\n          void $props.onUploadAborted?.();\n        } else {\n          throw e;\n        }\n      });\n    },\n    [$props, startUpload],\n  );\n\n  const onUploadClick = (e: React.MouseEvent) => {\n    if (state === \"uploading\") {\n      e.preventDefault();\n      e.stopPropagation();\n\n      acRef.current.abort();\n      acRef.current = new AbortController();\n      return;\n    }\n    if (mode === \"manual\" && files.length > 0) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      uploadFiles(files);\n    }\n  };\n\n  const inputProps = useMemo(\n    () => ({\n      type: \"file\",\n      ref: fileInputRef,\n      multiple,\n      accept: generateMimeTypes(fileTypes).join(\", \"),\n      onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (!e.target.files) return;\n        const selectedFiles = Array.from(e.target.files);\n\n        $props.onChange?.(selectedFiles);\n\n        if (mode === \"manual\") {\n          setFiles(selectedFiles);\n          return;\n        }\n\n        uploadFiles(selectedFiles);\n      },\n      disabled,\n      tabIndex: disabled ? -1 : 0,\n    }),\n    [$props, disabled, fileTypes, mode, multiple, uploadFiles],\n  );\n\n  usePaste((event) => {\n    if (!appendOnPaste) return;\n    if (document.activeElement !== fileInputRef.current) return;\n\n    const pastedFiles = getFilesFromClipboardEvent(event);\n    if (!pastedFiles) return;\n\n    let filesToUpload = pastedFiles;\n    setFiles((prev) => {\n      filesToUpload = [...prev, ...pastedFiles];\n\n      $props.onChange?.(filesToUpload);\n\n      return filesToUpload;\n    });\n\n    if (mode === \"auto\") uploadFiles(files);\n  });\n\n  const styleFieldArg = useMemo(\n    () =>\n      ({\n        ready: state !== \"readying\",\n        isUploading: state === \"uploading\",\n        uploadProgress,\n        fileTypes,\n        files,\n      }) as ButtonStyleFieldCallbackArgs,\n    [fileTypes, files, state, uploadProgress],\n  );\n\n  const renderButton = () => {\n    const customContent = contentFieldToContent(\n      $props.content?.button,\n      styleFieldArg,\n    );\n    if (customContent) return customContent;\n\n    switch (state) {\n      case \"readying\": {\n        return \"Loading...\";\n      }\n      case \"uploading\": {\n        if (uploadProgress >= 100) return <Spinner />;\n        return (\n          <span className=\"z-50\">\n            <span className=\"block group-hover:hidden\">\n              {Math.round(uploadProgress)}%\n            </span>\n            <Cancel cn={cn} className=\"hidden size-4 group-hover:block\" />\n          </span>\n        );\n      }\n      case \"disabled\":\n      case \"ready\":\n      default: {\n        if (mode === \"manual\" && files.length > 0) {\n          return `Upload ${files.length} file${files.length === 1 ? \"\" : \"s\"}`;\n        }\n        return `Choose File${inputProps.multiple ? `(s)` : ``}`;\n      }\n    }\n  };\n\n  const renderClearButton = () => (\n    <button\n      onClick={() => {\n        setFiles([]);\n\n        if (fileInputRef.current) {\n          fileInputRef.current.value = \"\";\n        }\n\n        $props.onChange?.([]);\n      }}\n      className={cn(\n        \"h-[1.25rem] cursor-pointer rounded border-none bg-transparent text-gray-500 transition-colors hover:bg-slate-200 hover:text-gray-600\",\n        styleFieldToClassName($props.appearance?.clearBtn, styleFieldArg),\n      )}\n      style={styleFieldToCssObject($props.appearance?.clearBtn, styleFieldArg)}\n      data-state={state}\n      data-ut-element=\"clear-btn\"\n    >\n      {contentFieldToContent($props.content?.clearBtn, styleFieldArg) ??\n        \"Clear\"}\n    </button>\n  );\n\n  const renderAllowedContent = () => (\n    <div\n      className={cn(\n        \"h-[1.25rem] text-xs leading-5 text-gray-600\",\n        styleFieldToClassName($props.appearance?.allowedContent, styleFieldArg),\n      )}\n      style={styleFieldToCssObject(\n        $props.appearance?.allowedContent,\n        styleFieldArg,\n      )}\n      data-state={state}\n      data-ut-element=\"allowed-content\"\n    >\n      {contentFieldToContent($props.content?.allowedContent, styleFieldArg) ??\n        allowedContentTextLabelGenerator(routeConfig)}\n    </div>\n  );\n\n  return (\n    <div\n      className={cn(\n        \"flex flex-col items-center justify-center gap-1\",\n        $props.className,\n        styleFieldToClassName($props.appearance?.container, styleFieldArg),\n      )}\n      style={\n        {\n          \"--progress-width\": `${uploadProgress}%`,\n          ...styleFieldToCssObject($props.appearance?.container, styleFieldArg),\n        } as CSSProperties\n      }\n      data-state={state}\n    >\n      <label\n        className={cn(\n          \"group relative flex h-10 w-36 cursor-pointer items-center justify-center overflow-hidden rounded-md text-white after:transition-[width] after:duration-500 focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2\",\n          \"disabled:pointer-events-none\",\n          \"data-[state=disabled]:cursor-not-allowed data-[state=readying]:cursor-not-allowed\",\n          \"data-[state=disabled]:bg-blue-400 data-[state=ready]:bg-blue-600 data-[state=readying]:bg-blue-400 data-[state=uploading]:bg-blue-400\",\n          \"after:absolute after:left-0 after:h-full after:w-[var(--progress-width)] after:content-[''] data-[state=uploading]:after:bg-blue-600\",\n          styleFieldToClassName($props.appearance?.button, styleFieldArg),\n        )}\n        style={styleFieldToCssObject($props.appearance?.button, styleFieldArg)}\n        data-state={state}\n        data-ut-element=\"button\"\n        onClick={onUploadClick}\n      >\n        <input {...inputProps} className=\"sr-only\" />\n        {renderButton()}\n      </label>\n      {mode === \"manual\" && files.length > 0\n        ? renderClearButton()\n        : renderAllowedContent()}\n    </div>\n  );\n}\n","\"use client\";\n\nimport {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from \"react\";\nimport type {\n  ChangeEvent,\n  CSSProperties,\n  DragEvent,\n  HTMLProps,\n  KeyboardEvent,\n  MouseEvent,\n} from \"react\";\nimport { fromEvent } from \"file-selector\";\n\nimport {\n  acceptPropAsAcceptAttr,\n  allFilesAccepted,\n  allowedContentTextLabelGenerator,\n  contentFieldToContent,\n  defaultClassListMerger,\n  generateClientDropzoneAccept,\n  generatePermittedFileTypes,\n  getFilesFromClipboardEvent,\n  initialState,\n  isEnterOrSpace,\n  isEventWithFiles,\n  isFileAccepted,\n  isIeOrEdge,\n  isValidQuantity,\n  isValidSize,\n  noop,\n  reducer,\n  resolveMaybeUrlArg,\n  styleFieldToClassName,\n  styleFieldToCssObject,\n  UploadAbortedError,\n} from \"@uploadthing/shared\";\nimport type {\n  ContentField,\n  DropzoneOptions,\n  ErrorMessage,\n  StyleField,\n} from \"@uploadthing/shared\";\nimport type { FileRouter } from \"uploadthing/types\";\n\nimport type { UploadthingComponentProps } from \"../types\";\nimport { __useUploadThingInternal } from \"../use-uploadthing\";\nimport { usePaste } from \"../utils/usePaste\";\nimport { Cancel, Spinner } from \"./shared\";\n\ntype DropzoneStyleFieldCallbackArgs = {\n  __runtime: \"react\";\n  ready: boolean;\n  isUploading: boolean;\n  uploadProgress: number;\n  fileTypes: string[];\n  isDragActive: boolean;\n  files: File[];\n};\n\ntype DropzoneAppearance = {\n  container?: StyleField<DropzoneStyleFieldCallbackArgs>;\n  uploadIcon?: StyleField<DropzoneStyleFieldCallbackArgs>;\n  label?: StyleField<DropzoneStyleFieldCallbackArgs>;\n  allowedContent?: StyleField<DropzoneStyleFieldCallbackArgs>;\n  button?: StyleField<DropzoneStyleFieldCallbackArgs>;\n};\n\ntype DropzoneContent = {\n  uploadIcon?: ContentField<DropzoneStyleFieldCallbackArgs>;\n  label?: ContentField<DropzoneStyleFieldCallbackArgs>;\n  allowedContent?: ContentField<DropzoneStyleFieldCallbackArgs>;\n  button?: ContentField<DropzoneStyleFieldCallbackArgs>;\n};\n\nexport type UploadDropzoneProps<\n  TRouter extends FileRouter,\n  TEndpoint extends keyof TRouter,\n> = UploadthingComponentProps<TRouter, TEndpoint> & {\n  /**\n   * @see https://docs.uploadthing.com/theming#style-using-the-classname-prop\n   */\n  className?: string;\n  /**\n   * @see https://docs.uploadthing.com/theming#style-using-the-appearance-prop\n   */\n  appearance?: DropzoneAppearance;\n  /**\n   * @see https://docs.uploadthing.com/theming#content-customisation\n   */\n  content?: DropzoneContent;\n  /**\n   * Callback called when files are dropped or pasted.\n   *\n   * @param acceptedFiles - The files that were accepted.\n   * @deprecated Use `onChange` instead\n   */\n  onDrop?: (acceptedFiles: File[]) => void;\n};\n\n/** These are some internal stuff we use to test the component and for forcing a state in docs */\ntype UploadThingInternalProps = {\n  __internal_state?: \"readying\" | \"ready\" | \"uploading\";\n  // Allow to set upload progress for testing\n  __internal_upload_progress?: number;\n  // Allow to set ready explicitly and independently of internal state\n  __internal_ready?: boolean;\n  // Allow to show the button even if no files were added\n  __internal_show_button?: boolean;\n  // Allow to disable the button\n  __internal_button_disabled?: boolean;\n  // Allow to disable the dropzone\n  __internal_dropzone_disabled?: boolean;\n};\n\nexport function UploadDropzone<\n  TRouter extends FileRouter,\n  TEndpoint extends keyof TRouter,\n>(\n  props: FileRouter extends TRouter\n    ? ErrorMessage<\"You forgot to pass the generic\">\n    : UploadDropzoneProps<TRouter, TEndpoint>,\n) {\n  // Cast back to UploadthingComponentProps<TRouter> to get the correct type\n  // since the ErrorMessage messes it up otherwise\n  const $props = props as unknown as UploadDropzoneProps<TRouter, TEndpoint> &\n    UploadThingInternalProps;\n\n  const {\n    mode = \"manual\",\n    appendOnPaste = false,\n    cn = defaultClassListMerger,\n  } = $props.config ?? {};\n  const acRef = useRef(new AbortController());\n\n  const [files, setFiles] = useState<File[]>([]);\n  const [uploadProgress, setUploadProgress] = useState(\n    $props.__internal_upload_progress ?? 0,\n  );\n\n  const { startUpload, isUploading, routeConfig } = __useUploadThingInternal(\n    resolveMaybeUrlArg($props.url),\n    $props.endpoint,\n    $props.fetch ?? globalThis.fetch,\n    {\n      signal: acRef.current.signal,\n      headers: $props.headers,\n      onClientUploadComplete: (res) => {\n        setFiles([]);\n        void $props.onClientUploadComplete?.(res);\n        setUploadProgress(0);\n      },\n      uploadProgressGranularity: $props.uploadProgressGranularity,\n      onUploadProgress: (p) => {\n        setUploadProgress(p);\n        $props.onUploadProgress?.(p);\n      },\n      onUploadError: $props.onUploadError,\n      onUploadBegin: $props.onUploadBegin,\n      onBeforeUploadBegin: $props.onBeforeUploadBegin,\n    },\n  );\n  const { fileTypes, multiple } = generatePermittedFileTypes(routeConfig);\n\n  const disabled = !!($props.__internal_dropzone_disabled ?? $props.disabled);\n  const state = (() => {\n    const ready =\n      $props.__internal_ready ??\n      ($props.__internal_state === \"ready\" || fileTypes.length > 0);\n\n    if ($props.__internal_state) return $props.__internal_state;\n    if (disabled) return \"disabled\";\n    if (!ready) return \"readying\";\n    if (!isUploading) return \"ready\";\n    return \"uploading\";\n  })();\n\n  const uploadFiles = useCallback(\n    (files: File[]) => {\n      const input = \"input\" in $props ? $props.input : undefined;\n      startUpload(files, input).catch((e) => {\n        if (e instanceof UploadAbortedError) {\n          void $props.onUploadAborted?.();\n        } else {\n          throw e;\n        }\n      });\n    },\n    [$props, startUpload],\n  );\n\n  const onUploadClick = (e: React.MouseEvent) => {\n    if (state === \"uploading\") {\n      e.preventDefault();\n      e.stopPropagation();\n\n      acRef.current.abort();\n      acRef.current = new AbortController();\n      return;\n    }\n    if (mode === \"manual\" && files.length > 0) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      uploadFiles(files);\n    }\n  };\n\n  const onDrop = useCallback(\n    (acceptedFiles: File[]) => {\n      $props.onDrop?.(acceptedFiles);\n      $props.onChange?.(acceptedFiles);\n\n      setFiles(acceptedFiles);\n\n      // If mode is auto, start upload immediately\n      if (mode === \"auto\") uploadFiles(acceptedFiles);\n    },\n    [$props, mode, uploadFiles],\n  );\n\n  const { getRootProps, getInputProps, isDragActive, rootRef } = useDropzone({\n    onDrop,\n    multiple,\n    accept: generateClientDropzoneAccept(fileTypes),\n    disabled,\n  });\n\n  usePaste((event: ClipboardEvent) => {\n    if (!appendOnPaste) return;\n    if (document.activeElement !== rootRef.current) return;\n\n    const pastedFiles = getFilesFromClipboardEvent(event);\n    if (!pastedFiles?.length) return;\n\n    let filesToUpload = pastedFiles;\n    setFiles((prev) => {\n      filesToUpload = [...prev, ...pastedFiles];\n\n      $props.onChange?.(filesToUpload);\n\n      return filesToUpload;\n    });\n\n    $props.onChange?.(filesToUpload);\n\n    if (mode === \"auto\") uploadFiles(filesToUpload);\n  });\n\n  const styleFieldArg = useMemo(\n    () =>\n      ({\n        ready: state !== \"readying\",\n        isUploading: state === \"uploading\",\n        uploadProgress,\n        fileTypes,\n        files,\n        isDragActive,\n      }) as DropzoneStyleFieldCallbackArgs,\n    [fileTypes, files, state, uploadProgress, isDragActive],\n  );\n\n  const getUploadButtonContents = () => {\n    const customContent = contentFieldToContent(\n      $props.content?.button,\n      styleFieldArg,\n    );\n    if (customContent) return customContent;\n\n    switch (state) {\n      case \"readying\": {\n        return \"Loading...\";\n      }\n      case \"uploading\": {\n        if (uploadProgress >= 100) return <Spinner />;\n        return (\n          <span className=\"z-50\">\n            <span className=\"block group-hover:hidden\">\n              {Math.round(uploadProgress)}%\n            </span>\n            <Cancel cn={cn} className=\"hidden size-4 group-hover:block\" />\n          </span>\n        );\n      }\n      case \"disabled\":\n      case \"ready\":\n      default: {\n        if (mode === \"manual\" && files.length > 0) {\n          return `Upload ${files.length} file${files.length === 1 ? \"\" : \"s\"}`;\n        }\n        return `Choose File${multiple ? `(s)` : ``}`;\n      }\n    }\n  };\n\n  return (\n    <div\n      className={cn(\n        \"mt-2 flex flex-col items-center justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10 text-center\",\n        isDragActive && \"bg-blue-600/10\",\n        $props.className,\n        styleFieldToClassName($props.appearance?.container, styleFieldArg),\n      )}\n      {...getRootProps()}\n      style={styleFieldToCssObject($props.appearance?.container, styleFieldArg)}\n      data-state={state}\n    >\n      {contentFieldToContent($props.content?.uploadIcon, styleFieldArg) ?? (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 20 20\"\n          className={cn(\n            \"mx-auto block h-12 w-12 align-middle text-gray-400\",\n            styleFieldToClassName($props.appearance?.uploadIcon, styleFieldArg),\n          )}\n          style={styleFieldToCssObject(\n            $props.appearance?.uploadIcon,\n            styleFieldArg,\n          )}\n          data-ut-element=\"upload-icon\"\n          data-state={state}\n        >\n          <path\n            fill=\"currentColor\"\n            fillRule=\"evenodd\"\n            d=\"M5.5 17a4.5 4.5 0 0 1-1.44-8.765a4.5 4.5 0 0 1 8.302-3.046a3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm3.75-2.75a.75.75 0 0 0 1.5 0V9.66l1.95 2.1a.75.75 0 1 0 1.1-1.02l-3.25-3.5a.75.75 0 0 0-1.1 0l-3.25 3.5a.75.75 0 1 0 1.1 1.02l1.95-2.1v4.59Z\"\n            clipRule=\"evenodd\"\n          ></path>\n        </svg>\n      )}\n      <label\n        className={cn(\n          \"relative mt-4 flex w-64 cursor-pointer items-center justify-center text-sm font-semibold leading-6 text-gray-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2 hover:text-blue-500\",\n          state === \"ready\" ? \"text-blue-600\" : \"text-gray-500\",\n          styleFieldToClassName($props.appearance?.label, styleFieldArg),\n        )}\n        style={styleFieldToCssObject($props.appearance?.label, styleFieldArg)}\n        data-ut-element=\"label\"\n        data-state={state}\n      >\n        <input className=\"sr-only\" {...getInputProps()} />\n        {contentFieldToContent($props.content?.label, styleFieldArg) ??\n          (state === \"ready\"\n            ? `Choose ${multiple ? \"file(s)\" : \"a file\"} or drag and drop`\n            : `Loading...`)}\n      </label>\n      <div\n        className={cn(\n          \"m-0 h-[1.25rem] text-xs leading-5 text-gray-600\",\n          styleFieldToClassName(\n            $props.appearance?.allowedContent,\n            styleFieldArg,\n          ),\n        )}\n        style={styleFieldToCssObject(\n          $props.appearance?.allowedContent,\n          styleFieldArg,\n        )}\n        data-ut-element=\"allowed-content\"\n        data-state={state}\n      >\n        {contentFieldToContent($props.content?.allowedContent, styleFieldArg) ??\n          allowedContentTextLabelGenerator(routeConfig)}\n      </div>\n\n      <button\n        className={cn(\n          \"group relative mt-4 flex h-10 w-36 items-center justify-center overflow-hidden rounded-md border-none text-base text-white\",\n          \"after:absolute after:left-0 after:h-full after:w-[var(--progress-width)] after:bg-blue-600 after:transition-[width] after:duration-500 after:content-['']\",\n          \"focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2\",\n          \"disabled:pointer-events-none\",\n          \"data-[state=disabled]:cursor-not-allowed data-[state=readying]:cursor-not-allowed\",\n          \"data-[state=disabled]:bg-blue-400 data-[state=ready]:bg-blue-600 data-[state=readying]:bg-blue-400 data-[state=uploading]:bg-blue-400\",\n          styleFieldToClassName($props.appearance?.button, styleFieldArg),\n        )}\n        style={\n          {\n            \"--progress-width\": `${uploadProgress}%`,\n            ...styleFieldToCssObject($props.appearance?.button, styleFieldArg),\n          } as CSSProperties\n        }\n        onClick={onUploadClick}\n        data-ut-element=\"button\"\n        data-state={state}\n        type=\"button\"\n        disabled={files.length === 0 || state === \"disabled\"}\n      >\n        {getUploadButtonContents()}\n      </button>\n    </div>\n  );\n}\n\nexport type DropEvent =\n  | Event\n  | React.DragEvent<HTMLElement>\n  | React.ChangeEvent<HTMLElement>;\n\n/**\n * A React hook that creates a drag 'n' drop area.\n *\n * ### Example\n *\n * ```tsx\n * function MyDropzone() {\n *   const { getRootProps, getInputProps } = useDropzone({\n *     onDrop: acceptedFiles => {\n *       // do something with the File objects, e.g. upload to some server\n *     }\n *   });\n *\n *   return (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag and drop some files here, or click to select files</p>\n *     </div>\n *   )\n * }\n * ```\n */\nexport function useDropzone({\n  accept,\n  disabled = false,\n  maxSize = Number.POSITIVE_INFINITY,\n  minSize = 0,\n  multiple = true,\n  maxFiles = 0,\n  onDrop,\n}: DropzoneOptions) {\n  const acceptAttr = useMemo(() => acceptPropAsAcceptAttr(accept), [accept]);\n\n  const rootRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dragTargetsRef = useRef<EventTarget[]>([]);\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    // Update file dialog active state when the window is focused on\n    const onWindowFocus = () => {\n      // Execute the timeout only if the file dialog is opened in the browser\n      if (state.isFileDialogActive) {\n        setTimeout(() => {\n          if (inputRef.current) {\n            const { files } = inputRef.current;\n\n            if (!files?.length) {\n              dispatch({ type: \"closeDialog\" });\n            }\n          }\n        }, 300);\n      }\n    };\n\n    const controller = new AbortController();\n    window.addEventListener(\"focus\", onWindowFocus, {\n      signal: controller.signal,\n    });\n    return () => {\n      controller.abort();\n    };\n  }, [state.isFileDialogActive]);\n\n  useEffect(() => {\n    const onDocumentDrop = (event: DropEvent) => {\n      // If we intercepted an event for our instance, let it propagate down to the instance's onDrop handler\n      if (rootRef.current?.contains(event.target as Node)) return;\n\n      event.preventDefault();\n      dragTargetsRef.current = [];\n    };\n    const onDocumentDragOver = (e: Pick<Event, \"preventDefault\">) =>\n      e.preventDefault();\n    const controller = new AbortController();\n\n    document.addEventListener(\"dragover\", onDocumentDragOver, {\n      capture: false,\n      signal: controller.signal,\n    });\n    document.addEventListener(\"drop\", onDocumentDrop, {\n      capture: false,\n      signal: controller.signal,\n    });\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n\n  const onDragEnter = useCallback(\n    (event: DragEvent<HTMLElement>) => {\n      event.preventDefault();\n      event.persist();\n\n      dragTargetsRef.current = [...dragTargetsRef.current, event.target];\n\n      if (isEventWithFiles(event)) {\n        Promise.resolve(fromEvent(event))\n          .then((files) => {\n            if (event.isPropagationStopped()) return;\n\n            const fileCount = files.length;\n            const isDragAccept =\n              fileCount > 0 &&\n              allFilesAccepted({\n                files: files as File[],\n                accept: acceptAttr!,\n                minSize,\n                maxSize,\n                multiple,\n                maxFiles,\n              });\n            const isDragReject = fileCount > 0 && !isDragAccept;\n\n            dispatch({\n              type: \"setDraggedFiles\",\n              payload: {\n                isDragAccept,\n                isDragReject,\n                isDragActive: true,\n              },\n            });\n          })\n          .catch(noop);\n      }\n    },\n    [acceptAttr, maxFiles, maxSize, minSize, multiple],\n  );\n\n  const onDragOver = useCallback((event: DragEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.persist();\n\n    const hasFiles = isEventWithFiles(event);\n    if (hasFiles) {\n      try {\n        event.dataTransfer.dropEffect = \"copy\";\n      } catch {\n        noop();\n      }\n    }\n\n    return false;\n  }, []);\n\n  const onDragLeave = useCallback((event: DragEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.persist();\n\n    // Only deactivate once the dropzone and all children have been left\n    const targets = dragTargetsRef.current.filter((target) =>\n      rootRef.current?.contains(target as Node),\n    );\n\n    // Make sure to remove a target present multiple times only once\n    // (Firefox may fire dragenter/dragleave multiple times on the same element)\n    const targetIdx = targets.indexOf(event.target);\n    if (targetIdx !== -1) targets.splice(targetIdx, 1);\n    dragTargetsRef.current = targets;\n    if (targets.length > 0) return;\n\n    dispatch({\n      type: \"setDraggedFiles\",\n      payload: {\n        isDragActive: false,\n        isDragAccept: false,\n        isDragReject: false,\n      },\n    });\n  }, []);\n\n  const setFiles = useCallback(\n    (files: File[]) => {\n      const acceptedFiles: File[] = [];\n\n      files.forEach((file) => {\n        const accepted = isFileAccepted(file, acceptAttr!);\n        const sizeMatch = isValidSize(file, minSize, maxSize);\n\n        if (accepted && sizeMatch) {\n          acceptedFiles.push(file);\n        }\n      });\n\n      if (!isValidQuantity(acceptedFiles, multiple, maxFiles)) {\n        acceptedFiles.splice(0);\n      }\n\n      dispatch({\n        type: \"setFiles\",\n        payload: {\n          acceptedFiles,\n        },\n      });\n\n      onDrop(acceptedFiles);\n    },\n    [acceptAttr, maxFiles, maxSize, minSize, multiple, onDrop],\n  );\n\n  const onDropCb = useCallback(\n    (event: ChangeEvent<HTMLElement>) => {\n      event.preventDefault();\n      event.persist();\n\n      dragTargetsRef.current = [];\n\n      if (isEventWithFiles(event)) {\n        Promise.resolve(fromEvent(event))\n          .then((files) => {\n            if (event.isPropagationStopped()) return;\n            setFiles(files as File[]);\n          })\n          .catch(noop);\n      }\n      dispatch({ type: \"reset\" });\n    },\n    [setFiles],\n  );\n\n  const openFileDialog = useCallback(() => {\n    if (inputRef.current) {\n      dispatch({ type: \"openDialog\" });\n      inputRef.current.value = \"\";\n      inputRef.current.click();\n    }\n  }, []);\n\n  // Cb to open the file dialog when SPACE/ENTER occurs on the dropzone\n  const onKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      // Ignore keyboard events bubbling up the DOM tree\n      if (!rootRef.current?.isEqualNode(event.target as Node)) return;\n\n      if (isEnterOrSpace(event)) {\n        event.preventDefault();\n        openFileDialog();\n      }\n    },\n    [openFileDialog],\n  );\n\n  const onInputElementClick = useCallback(\n    (e: MouseEvent) => {\n      e.stopPropagation();\n      if (state.isFileDialogActive) {\n        e.preventDefault();\n      }\n    },\n    [state.isFileDialogActive],\n  );\n\n  // Update focus state for the dropzone\n  const onFocus = useCallback(() => dispatch({ type: \"focus\" }), []);\n  const onBlur = useCallback(() => dispatch({ type: \"blur\" }), []);\n\n  const onClick = useCallback(() => {\n    // In IE11/Edge the file-browser dialog is blocking, therefore,\n    // use setTimeout() to ensure React can handle state changes\n    if (isIeOrEdge()) setTimeout(openFileDialog, 0);\n    else openFileDialog();\n  }, [openFileDialog]);\n\n  const getRootProps = useMemo(\n    () => (): HTMLProps<HTMLDivElement> => ({\n      ref: rootRef,\n      role: \"presentation\",\n      ...(!disabled\n        ? {\n            tabIndex: 0,\n            onKeyDown,\n            onFocus,\n            onBlur,\n            onClick,\n            onDragEnter,\n            onDragOver,\n            onDragLeave,\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            onDrop: onDropCb as any,\n          }\n        : {}),\n    }),\n    [\n      disabled,\n      onBlur,\n      onClick,\n      onDragEnter,\n      onDragLeave,\n      onDragOver,\n      onDropCb,\n      onFocus,\n      onKeyDown,\n    ],\n  );\n\n  const getInputProps = useMemo(\n    () => (): HTMLProps<HTMLInputElement> => ({\n      ref: inputRef,\n      type: \"file\",\n      style: { display: \"none\" },\n      accept: acceptAttr,\n      multiple,\n      tabIndex: -1,\n      ...(!disabled\n        ? {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            onChange: onDropCb as any,\n            onClick: onInputElementClick,\n          }\n        : {}),\n    }),\n    [acceptAttr, multiple, onDropCb, onInputElementClick, disabled],\n  );\n\n  return {\n    ...state,\n    getRootProps,\n    getInputProps,\n    rootRef,\n  };\n}\n","\"use client\";\n\nimport type { ErrorMessage } from \"@uploadthing/shared\";\nimport type { FileRouter } from \"uploadthing/types\";\n\nimport type { UploadthingComponentProps } from \"../types\";\nimport { UploadButton } from \"./button\";\nimport { UploadDropzone } from \"./dropzone\";\n\nexport function Uploader<\n  TRouter extends FileRouter,\n  TEndpoint extends keyof TRouter,\n>(\n  props: FileRouter extends TRouter\n    ? ErrorMessage<\"You forgot to pass the generic\">\n    : UploadthingComponentProps<TRouter, TEndpoint>,\n) {\n  return (\n    <>\n      <div className=\"flex flex-col items-center justify-center gap-4\">\n        <span className=\"text-center text-4xl font-bold\">\n          {`Upload a file using a button:`}\n        </span>\n        {/* @ts-expect-error - this is validated above */}\n        <UploadButton<TRouter> {...props} />\n      </div>\n      <div className=\"flex flex-col items-center justify-center gap-4\">\n        <span className=\"text-center text-4xl font-bold\">\n          {`...or using a dropzone:`}\n        </span>\n        {/* @ts-expect-error - this is validated above */}\n        <UploadDropzone<TRouter> {...props} />\n      </div>\n    </>\n  );\n}\n","import {\n  resolveMaybeUrlArg,\n  warnIfInvalidPeerDependency,\n} from \"@uploadthing/shared\";\nimport { version as uploadthingClientVersion } from \"uploadthing/client\";\nimport type { FileRouter } from \"uploadthing/types\";\n\nimport { peerDependencies } from \"../../package.json\";\nimport type {\n  GenerateTypedHelpersOptions,\n  UploadthingComponentProps,\n} from \"../types\";\nimport type { UploadButtonProps } from \"./button\";\nimport { UploadButton } from \"./button\";\nimport type { UploadDropzoneProps } from \"./dropzone\";\nimport { UploadDropzone } from \"./dropzone\";\nimport { Uploader } from \"./uploader\";\n\nexport { UploadButton, UploadDropzone, Uploader };\n\nexport const generateUploadButton = <TRouter extends FileRouter>(\n  opts?: GenerateTypedHelpersOptions,\n) => {\n  warnIfInvalidPeerDependency(\n    \"@uploadthing/react\",\n    peerDependencies.uploadthing,\n    uploadthingClientVersion,\n  );\n\n  const url = resolveMaybeUrlArg(opts?.url);\n  const fetch = opts?.fetch ?? globalThis.fetch;\n\n  const TypedButton = <TEndpoint extends keyof TRouter>(\n    props: Omit<\n      UploadButtonProps<TRouter, TEndpoint>,\n      keyof GenerateTypedHelpersOptions\n    >,\n  ) => (\n    <UploadButton<TRouter, TEndpoint>\n      {...(props as any)}\n      url={url}\n      fetch={fetch}\n    />\n  );\n  return TypedButton;\n};\n\nexport const generateUploadDropzone = <TRouter extends FileRouter>(\n  opts?: GenerateTypedHelpersOptions,\n) => {\n  warnIfInvalidPeerDependency(\n    \"@uploadthing/react\",\n    peerDependencies.uploadthing,\n    uploadthingClientVersion,\n  );\n\n  const url = resolveMaybeUrlArg(opts?.url);\n  const fetch = opts?.fetch ?? globalThis.fetch;\n\n  const TypedDropzone = <TEndpoint extends keyof TRouter>(\n    props: Omit<\n      UploadDropzoneProps<TRouter, TEndpoint>,\n      keyof GenerateTypedHelpersOptions\n    >,\n  ) => (\n    <UploadDropzone<TRouter, TEndpoint>\n      {...(props as any)}\n      url={url}\n      fetch={fetch}\n    />\n  );\n  return TypedDropzone;\n};\n\nexport const generateUploader = <TRouter extends FileRouter>(\n  opts?: GenerateTypedHelpersOptions,\n) => {\n  warnIfInvalidPeerDependency(\n    \"@uploadthing/react\",\n    peerDependencies.uploadthing,\n    uploadthingClientVersion,\n  );\n\n  const url = resolveMaybeUrlArg(opts?.url);\n  const fetch = opts?.fetch ?? globalThis.fetch;\n\n  const TypedUploader = <TEndpoint extends keyof TRouter>(\n    props: Omit<\n      UploadthingComponentProps<TRouter, TEndpoint>,\n      keyof GenerateTypedHelpersOptions\n    >,\n  ) => (\n    <Uploader<TRouter, TEndpoint> {...(props as any)} url={url} fetch={fetch} />\n  );\n  return TypedUploader;\n};\n"],"mappings":"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"}